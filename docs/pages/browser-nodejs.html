<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js Integration - FreeWorld OS Documentation</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <h2>Navigation</h2>
            <ul class="nav-menu">
                <li><a href="../index.html">Home</a></li>
                <li class="nav-section">Boot Components</li>
                <li><a href="bootmgr.html">BOOTMGR</a></li>
                <li><a href="bcd.html">BCD</a></li>
                <li><a href="freeload.html">freeload.exe</a></li>
                <li class="nav-section">Core System</li>
                <li><a href="kernel.html">fwoskrnl.exe</a></li>
                <li><a href="hal.html">hal.dll</a></li>
                <li><a href="io-infrastructure.html">I/O Infrastructure</a></li>
                <li><a href="memory.html">Memory Management</a></li>
                <li><a href="drivers.html">Device Drivers</a></li>
                <li><a href="process.html">Process Management</a></li>
                <li><a href="execve.html">execve() System Call</a></li>
                <li><a href="resource-manager.html">Resource Manager</a></li>
                <li><a href="ipc-system.html">IPC System</a></li>
                <li><a href="filesystem-kernel.html">File System</a></li>
                <li><a href="elf-loader.html">ELF Loader</a></li>
                <li><a href="graphics.html">Graphics System</a></li>
                <li><a href="minimal-libc.html">Minimal C Library</a></li>
                <li><a href="build-system.html">Build System</a></li>
                <li class="nav-section">Services</li>
                <li><a href="smss.html">smss.exe</a></li>
                <li><a href="csrss.html">csrss.exe</a></li>
                <li><a href="freeworldlogon.html">freeworldlogon.exe</a></li>
                <li><a href="networkd.html">networkd</a></li>
                <li><a href="logd.html">logd</a></li>
                <li><a href="securityd.html">securityd</a></li>
                <li><a href="services-manager.html">Services Manager</a></li>
                <li><a href="task-manager.html">Task Manager</a></li>
                <li class="nav-section">User Interface</li>
                <li><a href="shell.html">Shell</a></li>
                <li><a href="wanderer.html">Wanderer</a></li>
                <li><a href="fwmic.html">FWMIC</a></li>
                <li class="nav-section">GUI Subsystems</li>
                <li><a href="dc.html">Device Context</a></li>
                <li><a href="compositor.html">Compositor</a></li>
                <li><a href="resources.html">Resource Manager</a></li>
                <li><a href="event-system.html">Event System</a></li>
                <li><a href="input-manager.html">Input Manager</a></li>
                <li><a href="windowing-architecture.html">Windowing Architecture</a></li>
                <li><a href="gui-kernel.html">Kernel GUI System</a></li>
                <li><a href="window.html">Window Management</a></li>
                <li><a href="wm-client.html">Window Manager Client</a></li>
                <li><a href="graphics.html">Graphics System</a></li>
                <li><a href="drivers.html">Graphics Drivers</a></li>
                <li><a href="gui-integration.html">GUI Integration</a></li>
                <li><a href="timer.html">Timer Manager</a></li>
                <li><a href="property.html">Property Manager</a></li>
                <li><a href="hooks.html">Hook Manager</a></li>
                <li><a href="focus.html">Focus Manager</a></li>
                <li class="nav-section">System Services</li>
                <li><a href="object-manager.html">Object Manager</a></li>
                <li><a href="path.html">Path Parser</a></li>
                <li><a href="registry.html">Registry</a></li>
                <li><a href="filesystem-watcher.html">File System Watcher</a></li>
                <li><a href="security.html">Security Manager</a></li>
                <li><a href="error.html">Error Manager</a></li>
                <li><a href="shell-ecosystem.html">Shell Ecosystem</a></li>
                <li><a href="user-accounts.html">User Account Management</a></li>
                <li class="nav-section">Node.js System</li>
                <li><a href="window.html">Window API</a></li>
                <li><a href="desktop.html">Desktop</a></li>
                <li><a href="api.html">System API</a></li>
                <li><a href="filesystem.html">Filesystem API</a></li>
                <li><a href="integration.html">System Integration</a></li>
                <li class="nav-section">Rendering System</li>
                <li><a href="rendering-engine.html">Native Rendering Engine</a></li>
                <li><a href="browser-engine.html">ASM Browser Engine (Legacy)</a></li>
                <li><a href="browser-nodejs.html">Node.js Integration</a></li>
                <li><a href="browser-rendering.html">Rendering System</a></li>
                <li><a href="browser-network.html">Network Stack</a></li>
                <li class="nav-section">Reference</li>
                <li><a href="naming-conventions.html">Naming Conventions</a></li>
                <li><a href="boot-process.html">Boot Process</a></li>
                <li><a href="boot-analysis.html">Boot Analysis</a></li>
                <li><a href="architecture.html">Architecture</a></li>
                <li><a href="syscalls.html">System Calls</a></li>
                <li><a href="variables.html">Variables & Constants</a></li>
            </ul>
        </nav>

        <main class="content">
            <div class="page-header">
                <h1>Node.js Integration</h1>
                <div class="meta">
                    <strong>Location:</strong> <code>system/</code> (Node.js modules)<br>
                    <strong>Type:</strong> Rendering System Component<br>
                    <strong>Status:</strong> âœ… Fully Implemented
                </div>
            </div>

            <section class="section">
                <h2>Overview</h2>
                <p>The Node.js Integration component provides the interface between Node.js applications and the native rendering engine. It enables Node.js applications to render graphics, handle input, and interact with the FreeWorld OS windowing system.</p>
            </section>

            <section class="section">
                <h2>Architecture</h2>
                <p>The Node.js integration follows a hybrid architecture:</p>
                <ul>
                    <li><strong>Node.js Layer:</strong> High-level application logic and UI framework</li>
                    <li><strong>Graphics Bridge:</strong> Interface between Node.js and kernel graphics</li>
                    <li><strong>Kernel Graphics:</strong> Native assembly rendering primitives</li>
                </ul>
            </section>

            <section class="section">
                <h2>Components</h2>
                
                <h3>1. Graphics Bridge</h3>
                <p><strong>Location:</strong> <code>system/graphics-bridge.js</code></p>
                <p>Provides access to kernel VESA framebuffer:</p>
                <ul>
                    <li>Framebuffer initialization</li>
                    <li>Pixel-level drawing operations</li>
                    <li>Window buffer blitting</li>
                    <li>Screen clearing</li>
                </ul>

                <h3>2. Device Context (DC)</h3>
                <p><strong>Location:</strong> <code>system/dc.js</code></p>
                <p>Off-screen rendering surfaces for Node.js applications:</p>
                <ul>
                    <li>RGBA bitmap buffers</li>
                    <li>Drawing primitives</li>
                    <li>Clipping regions</li>
                </ul>

                <h3>3. Compositor</h3>
                <p><strong>Location:</strong> <code>system/compositor.js</code></p>
                <p>Merges window buffers before sending to screen:</p>
                <ul>
                    <li>Z-order management</li>
                    <li>Alpha blending</li>
                    <li>Shadow rendering</li>
                </ul>
            </section>

            <section class="section">
                <h2>Integration Points</h2>
                <ul>
                    <li><strong>Kernel Graphics:</strong> Direct framebuffer access via graphics bridge</li>
                    <li><strong>Window System:</strong> Window creation and management</li>
                    <li><strong>Input System:</strong> Mouse and keyboard input handling</li>
                    <li><strong>Event System:</strong> Event bus for component communication</li>
                </ul>
            </section>

            <section class="section">
                <h2>Usage</h2>
                <div class="code-block">
                    <pre><code>// Node.js application using FreeWorld OS graphics
const { createDC } = require('./system/dc');
const Compositor = require('./system/compositor');

// Create a device context for rendering
const dc = createDC(800, 600);

// Draw to the DC
dc.drawRect(0, 0, 800, 600, 0xFF0000FF); // Blue background
dc.drawText(100, 100, 'Hello, FreeWorld OS!', 0xFFFFFFFF);

// Composite to screen
const compositor = new Compositor(1920, 1080);
compositor.registerWindow(hwnd, dc);
compositor.render();</code></pre>
                </div>
            </section>

            <section class="section">
                <h2>Related Documentation</h2>
                <ul>
                    <li><a href="browser-rendering.html">Rendering System</a> - Native rendering engine</li>
                    <li><a href="dc.html">Device Context</a> - Off-screen rendering</li>
                    <li><a href="compositor.html">Compositor</a> - Window compositing</li>
                    <li><a href="graphics.html">Graphics System</a> - Kernel graphics</li>
                </ul>
            </section>
        </main>
    </div>

    <footer>
        <p>FreeWorld OS Documentation v0.1.0</p>
    </footer>

    <script src="../navigation.js"></script>
</body>
</html>

